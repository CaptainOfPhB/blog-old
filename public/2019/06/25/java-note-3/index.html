<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="CaptainOfPhB" />
	
	
	
	<title>Java 学习笔记（三) ♡ 船长の部落格</title>
	
    
    
    <meta name="description" content="Java 学习笔记（三）" />
    

    
    
    <meta name="keywords" content="Java" />
    

	
    
    <link rel="shortcut icon" href="/images/favicon.png" />

    <link rel="stylesheet" type="text/css" media="screen" href="/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/captain.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">首页</a>
            </li>
            
            <li>
                <a href="/posts/">归档</a>
            </li>
            
            <li>
                <a href="/tags/">标签</a>
            </li>
            
            <li>
                <a href="/about-me">关于</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="/">
                    <span>沉梦昂志</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">&lt;Reach Me Here /&gt;</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/CaptainOfPhB" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://twitter.com/CaptainInPHW" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                
                <a href="https://i.loli.net/2020/09/13/zSqAWYPjFkaht2T.jpg" title="wechat" target="_blank"><i class="ri-wechat-fill"></i></a>
                
                
                
                <a href="https://www.zhihu.com/people/CaptainInPHW" title="zhihu" target="_blank"><i class="ri-zhihu-fill"></i></a>
                
                
                <a href="/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="single_page post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/2019/06/25/java-note-3/'>Java 学习笔记（三)</a></h2>
                        <span class="date">2019.06.25</span>
                    </div>
                    <div class="post_content markdown">
                        <h3 id="数据类型">数据类型</h3>
<ul>
<li>Java 中一个 int 数据类型数据占 4 个字节（byte） 大小，32 位（bit）。最高位是符号位，剩下的 31 位存放数据</li>
<li>char 类型和 short 类型数据占用 2 个 byte，任何数据类型在内存中都是以二进制形式存储的</li>
<li>使用 man ascii 查看码表</li>
<li>java 中以 0 开头的数字表示 8 进制，以 0x 开头的数字表示 16 进制，0b 开头的数字表示 2 进制</li>
<li>java 中的数据分为<strong>原生类型</strong>和<strong>引用类型</strong>。只要能在 java 语言包中找到对应的 class 的就是引用类型，否则就是原生类型</li>
<li>java 中的基本类型有：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">数据类型</th>
<th style="text-align:center">byte</th>
<th style="text-align:center">int</th>
<th style="text-align:center">long</th>
<th style="text-align:center">double</th>
<th style="text-align:center">float</th>
<th style="text-align:center">char</th>
<th style="text-align:center">boolean</th>
<th style="text-align:center">void</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">所占空间（字节）</td>
<td style="text-align:center">1</td>
<td style="text-align:center">4</td>
<td style="text-align:center">8</td>
<td style="text-align:center">8</td>
<td style="text-align:center">4</td>
<td style="text-align:center">2</td>
<td style="text-align:center">true/false</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<ul>
<li>每个类型数据都有最大值最小值，如果超过最大最小范围， 则会发生溢出，数据会变为最初始的数值，例如:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">127</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">((</span><span class="kt">byte</span><span class="o">)(</span><span class="n">a</span> <span class="o">+</span> <span class="n">1</span><span class="o">));</span> <span class="c1">// -128, int 类型数据最大 127，最小 -128
</span></code></pre></div><ul>
<li>int 类型数据最大值大概是 21 亿，强制类型转换的时候会丢失精度</li>
<li>每个数据类型原始的类称为装箱类型</li>
<li>java 中，可以使用 <strong>_</strong> 作为数字的分割符，例如 int a = 1_0_0_0 和 int a = 1000 是等价的</li>
<li>float 和 double 是计算中对于小数的近似表示，因为浮点数无法精确的存储十进制的小数。浮点数只能比较大小，不能比较相等，如果两个浮点数相等，仅仅只是巧合</li>
<li>浮点数如何实现相等比较呢？使用 Math.abs() 方法，例如：</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="n">0</span><span class="o">.</span><span class="na">00002</span><span class="o">;</span>
<span class="k">if</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">0</span><span class="o">.</span><span class="na">00002</span><span class="o">)</span> <span class="o">&lt;</span> <span class="n">0</span><span class="o">.</span><span class="na">0000000001</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 小于一个足够小的数字，说明两者是相等的
</span><span class="c1"></span>    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>如何声明不同数据类型的数据？</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">byte</span> <span class="n">e</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">126</span><span class="o">);</span> <span class="c1">// 使用类型转换的例子
</span><span class="c1"></span><span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="n">1000000</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">g</span> <span class="o">=</span> <span class="n">0x12377</span><span class="o">;</span> <span class="c1">// 16 进制
</span><span class="c1"></span><span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="n">0b1010011</span><span class="o">;</span> <span class="c1">// 2 进制
</span><span class="c1"></span><span class="kt">long</span> <span class="n">a</span> <span class="o">=</span> <span class="n">1000000000000L</span><span class="o">;</span> <span class="c1">// 末尾使用大写的 L
</span><span class="c1"></span><span class="kt">float</span> <span class="n">b</span> <span class="o">=</span> <span class="n">0</span><span class="o">.</span><span class="na">1f</span><span class="o">;</span>
<span class="kt">double</span> <span class="n">c</span> <span class="o">=</span> <span class="n">1e</span><span class="o">-</span><span class="n">7d</span><span class="o">;</span> <span class="c1">// e 代表 10 次方
</span></code></pre></div><h3 id="类型转换">类型转换</h3>
<ul>
<li>整数除法是地板除。除法结果向下取整，导致得到的结果和预期不符</li>
<li>解决类型原因带来的异常，需要把所有的数据类型提升到最高精度级别</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">3</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">2</span><span class="o">;</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">);</span> <span class="c1">// 1.0，向下取整
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">((</span><span class="kt">double</span><span class="o">)</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">);</span> <span class="c1">// 1.5
</span></code></pre></div><ul>
<li>丢失精度时需要进行强制类型转换</li>
<li>char 参与计算的时候使用的是 ascii 码，char i = &lsquo;1&rsquo; 与 char i = 49 是等价的</li>
</ul>
<h3 id="装箱类型">装箱类型</h3>
<ul>
<li>原生（基本）数据类型的包装类称为装箱类型。java 在一些情况下会自动做装箱拆箱处理。类似 js 中：</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// js
</span><span class="c1"></span><span class="kd">const</span> <span class="n">obj1</span> <span class="o">=</span> <span class="o">{};</span>
<span class="kd">const</span> <span class="n">obj2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">();</span>
<span class="kd">const</span> <span class="n">num1</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span>
<span class="kd">const</span> <span class="n">num2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Number</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
<span class="c1">// java
</span><span class="c1"></span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span>
<span class="n">Integer</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
</code></pre></div><ul>
<li>容器类不接受原生数据类型，必须是装箱类型，例如：</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 错误的使用原生类型
</span><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="c1">// 正确的使用装箱类型
</span><span class="c1"></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</code></pre></div><ul>
<li>可以赋值为 null，例如：</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">flag</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// error, 原生数据类型不允许赋值为 null
</span><span class="c1"></span>
<span class="n">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</code></pre></div><p>但是对装箱类型赋值 null 的时候，存在一个隐患：当我们将一个装箱的数据赋值给一个原生类型的数据时，java 会进行拆箱操作，拆箱可能会出现<u>空指针异常报错</u>（NullPointerException），比如：</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Integer</span> <span class="n">i</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="c1">// NullPointerException，java 拆箱的时候发生错误
</span></code></pre></div><ul>
<li>可以使用装箱类型提供的一些方法，类似于 js 中的 Object.prototype.toString 等操作。比如 Integer.parseInt() 可将字符串转换为 int 类型数据</li>
</ul>
<h3 id="相等比较">相等比较</h3>
<ul>
<li>equals 用来比较两个值是否相等，而 == 用来比较两个值是否具有同一性</li>
<li>当 java 中的数据为基础类型时，使用 == 能够得到正确的结果。当数据为引用类型的时候，使用 == 比较的是引用类型的栈内存（stack）内容，通常得不到正确的结果，因为真正的数据存放于堆（heap）内存中</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">1000</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">1000</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="o">);</span> <span class="c1">// true
</span><span class="c1"></span>
<span class="n">Integer</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
<span class="n">Integer</span> <span class="n">j</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="o">);</span> <span class="c1">// false
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">j</span><span class="o">));</span> <span class="c1">// true, 使用 equals 得到正确的结果
</span></code></pre></div><ul>
<li>当 Integer 包装类声明的引用对象赋值 -128 ~127 范围内的数值时，使用 == 进行两个值得比较会神奇的得到比较结果为 true：</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Integer</span> <span class="n">i</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
<span class="n">Integer</span> <span class="n">j</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="o">);</span> <span class="c1">// true
</span></code></pre></div><p>其原因是：Integer 创建的引用类型数据占用的空间大小远远比 int 占用的 4 byte 要大，因此 java 为了优化节省内存，将 -128 ~ 127 范围内的 Integer 数据进行了<strong>缓存</strong>，因此 i 和 j 指向的都是同一处堆内存，导致了使用 == 进行比较的时候得到的结果为 true，可以在 JDK 的代码中查看查看注释。</p>
<p>完。</p>

                        <div class="promotion_text">&lt;reach&nbsp;me&nbsp;here&nbsp;/&gt;</div>
<div class="promotion_container">
  <a href="https://github.com/CaptainOfPhB" target="_blank">
    <img class="github" src="/images/github-gray.png" alt="GitHub" />
  </a>
  <a href="https://www.zhihu.com/people/CaptainInPHW" target="_blank">
    <img class="zhihu" src="/images/zhihu-gray.png" alt="知乎" />
  </a>
  <a href="https://juejin.cn/user/2488950055523965" target="_blank">
    <img class="juejin" src="/images/juejin-gray.png" alt="掘金" />
  </a>
  <a href="https://www.yuque.com/captainofphb" target="_blank">
    <img class="yuque" src="/images/yuque-gray.png" alt="语雀" />
  </a>
  <a href="https://dev.to/captainofphb" target="_blank">
    <img class="dev" src="/images/dev-gray.png" alt="DEV" />
  </a>
</div>

                    </div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="/tags/java/">Java</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://github.com/CaptainOfPhB">Designed by CaptainOfPhB,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span>愿历经千帆，归来仍少年。</span>
    </div>
</footer>
    <script src="/js/jquery-3.5.1.min.js"></script>
<link href="/css/fancybox.min.css" rel="stylesheet">
<script src="/js/fancybox.min.js"></script>
<script src="/js/captain.js"></script>

<script>
  var tables = document.getElementsByTagName('table');
  if(tables.length) {
    for(var i = 0; i < tables.length; i++) {
      tables[i].outerHTML = '<div style="overflow-x: auto">' + tables[i].outerHTML + '</div>'; 
    }
  }
</script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>

</body>

</html>